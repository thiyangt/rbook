# Data Wrangling

## Exercise

This exercise is based on the `DStidy` dataset from the `DSjobtracker` package in R. This dataset was compiled from job advertisements for roles like statisticians and data scientists. It includes information on job roles, required qualifications, technical and soft skills, tools, platforms, and other relevant criteria frequently mentioned in the job advertisements. Write R code to answer each question. Use the provided output to verify the correctness of your code.

1. How many job advertisements mention both `R` and `Python` as required skills?

```{r}
#| echo: false
#| warning: false
#| message: false
library(tidyverse)
library(DSjobtracker)
data(DStidy)
DStidy |>
  filter(R == 1, Python == 1) |>
  nrow()
```

 
2. Which job categories require R but not Python?

Help: `distinct` function

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>%
  filter(R == 1, Python == 1) %>%
  distinct(Job_Category)

```


3. What is the most common educational qualification required (BSc_needed, MSc_needed, PhD_needed) across all job categories?

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>%
  summarise(
    BSc = sum(BSc_needed == 1, na.rm = TRUE),
    MSc = sum(MSc_needed == 1, na.rm = TRUE),
    PhD = sum(PhD_needed == 1, na.rm = TRUE)
  )
```

4. What is the average salary for job roles that require SQL, grouped by Job_Category?


```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>%
  filter(SQL == 1) %>%
  group_by(Job_Category) %>%
  summarise(avg_salary = mean(Salary, na.rm = TRUE)) %>%
  arrange(desc(avg_salary))

```

5. Calculate the proportion of job advertisements that require English by City.

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>%
  group_by(City) %>%
  summarise(Prop_English = mean(`English Needed` == 1, na.rm = TRUE)) %>%
  arrange(desc(Prop_English))
```


6. Select only the columns: ID, Job_title, Company, and City.

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% select(ID, Job_title, Company, City)

```

7. Filter the dataset to include only jobs that mention Python as a required skill.


```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% filter(Python == 1)

```

8. Select all columns related to Microsoft Office tools.

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% select(matches("MS Word|MS Excel|MS PowerPoint|Ms Access"))

```

9. Filter jobs that were published in or after the year 2023.

Help: use `year` function in the lubridate package


```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% filter(lubridate::year(DatePublished) >= 2023)

```

10. Filter the jobs where both PhD_needed and MSc_needed are 0.

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% filter(PhD_needed == 0, MSc_needed == 0)
```


11. Filter out all rows where Salary is missing (NA).


```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>% filter(!is.na(Salary))

```

12. For each Experience_Category, compute the percentage of jobs that require Presentation_Skills.

```{r}
#| echo: false
#| warning: false
#| message: false
DStidy %>%
  group_by(Experience_Category) %>%
  summarise(prop_presentation = mean(Presentation_Skills == 1, na.rm = TRUE))
```


